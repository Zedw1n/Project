
var lazy_load_instance = new LazyLoad();
function SwiperInitialization() {
  var swiper1 = new Swiper('.header-slider', {
    loop: true,
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    }
  });
  
  var swiper2 = new Swiper('.review-slider', {
    loop: true,
    pagination: {
      el: '.swiper-pagination'
    },
  });
}

function get_comments(num_rows,comment_package,slide_count,cycles){
  wrapper.innerHTML = '';

  for (num_rows; num_rows>0; num_rows--) {

    let counter = num_rows - 1;
    
    for(slide_count+1; slide_count>0;slide_count--){

      let document_fragment = document.createDocumentFragment();
      let slide = document.createElement('div');
      slide.classList.add('swiper-slide');
      document_fragment.appendChild(slide);
      
      for(let i = 0; i<cycles; i++){
        
        if(counter < 0){break};
        
        let slide_review_card = document.createElement('div');
        slide_review_card.classList.add('review-card');

        let slide_review_card_name = document.createElement('div');
        slide_review_card_name.classList.add('review-card-name');
        slide_review_card_name.innerHTML = '- ' + comment_package['name'][counter];

        let slide_review_card_review = document.createElement('div');
        slide_review_card_review.classList.add('review-card-review');
        slide_review_card_review.innerHTML = "“" + comment_package['comment'][counter] + "”" ;

        let slide_review_card_date = document.createElement('div');
        slide_review_card_date.classList.add('review-card-date');
        slide_review_card_date.innerHTML = comment_package['date'][counter];

        slide_review_card.append(slide_review_card_name,slide_review_card_review,slide_review_card_date);
        slide.appendChild(slide_review_card);
        document_fragment.appendChild(slide);

        counter--;
      }
      wrapper.appendChild(document_fragment);
    }
  }

}

async function getData(){
  const response = await fetch("../../get_comments.php");
  let comment_package = await response.json();
  return comment_package

}

async function SliderMediaBuilder(slider_media_query){
  let comment_package = await getData();
  if (slider_media_query.matches) {
    let slide_count;
    if (comment_package['num_rows'] >10 ){
      slide_count = 10;
    } else {
      slide_count = comment_package['num_rows'];
    }
    let cycles = 1;
    get_comments(
    comment_package['num_rows'],
    comment_package,
    slide_count,
    cycles);
  } else {
    if(comment_package['num_rows'] % 4 == 1){
      let slide_count;
      if (comment_package['num_rows'] >20 ){
        slide_count = 5;
      } else {
        slide_count = Math.round(comment_package['num_rows'] / 4)+1;//Math.round(comment_package['num_rows'] / 4)+1;
      }
      let cycles = 4;
      get_comments(
      comment_package['num_rows'],
      comment_package,
      slide_count,
      cycles);
    } else{
      let slide_count;
      if (comment_package['num_rows'] >20 ){
        slide_count = 5;
      } else {
        slide_count = Math.round(comment_package['num_rows'] / 4);//Math.round(comment_package['num_rows'] / 4);
      };
      let cycles = 4;
      get_comments(
      comment_package['num_rows'],
      comment_package,
      slide_count,
      cycles);
    }
  }
  SwiperInitialization()
}

function openmodal() {
  modal.showModal();
}
function closemodal() {
  modal.close();
}

function CheckReviewValidation(form){
  let comment = form.querySelector('textarea').value;
  let name = form.querySelector('input').value;
  let warning = document.getElementById('review-invalid-warning')
  if(comment && name){
    if(comment.length < 100){
      form.submit()
      
    }else {
      warning.innerHTML = "Вы ввели " + comment.length + " символов";
    }
  } else {
    warning.innerHTML = "Заполните все поля!";
  }
  
}

document.getElementById('review-form').addEventListener('submit',function(event){
  event.preventDefault();
  CheckReviewValidation(this);
});

const wrapper = document.getElementById("review-slider-wrapper");
const slider_media_query = window.matchMedia('(max-width:800px)');
slider_media_query.addListener(SliderMediaBuilder);
SliderMediaBuilder(slider_media_query);


document.querySelectorAll('.product-button').forEach(function(btn){
  btn.addEventListener('click', function(){
    productID = btn.dataset.id
    document.querySelector('.order-product-id').value = productID
    
  })
})


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzY29kZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoianMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbnZhciBsYXp5X2xvYWRfaW5zdGFuY2UgPSBuZXcgTGF6eUxvYWQoKTtcclxuZnVuY3Rpb24gU3dpcGVySW5pdGlhbGl6YXRpb24oKSB7XHJcbiAgdmFyIHN3aXBlcjEgPSBuZXcgU3dpcGVyKCcuaGVhZGVyLXNsaWRlcicsIHtcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxyXG4gICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICB2YXIgc3dpcGVyMiA9IG5ldyBTd2lwZXIoJy5yZXZpZXctc2xpZGVyJywge1xyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRfY29tbWVudHMobnVtX3Jvd3MsY29tbWVudF9wYWNrYWdlLHNsaWRlX2NvdW50LGN5Y2xlcyl7XHJcbiAgd3JhcHBlci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgZm9yIChudW1fcm93czsgbnVtX3Jvd3M+MDsgbnVtX3Jvd3MtLSkge1xyXG5cclxuICAgIGxldCBjb3VudGVyID0gbnVtX3Jvd3MgLSAxO1xyXG4gICAgXHJcbiAgICBmb3Ioc2xpZGVfY291bnQrMTsgc2xpZGVfY291bnQ+MDtzbGlkZV9jb3VudC0tKXtcclxuXHJcbiAgICAgIGxldCBkb2N1bWVudF9mcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuICAgICAgbGV0IHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgIHNsaWRlLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1zbGlkZScpO1xyXG4gICAgICBkb2N1bWVudF9mcmFnbWVudC5hcHBlbmRDaGlsZChzbGlkZSk7XHJcbiAgICAgIFxyXG4gICAgICBmb3IobGV0IGkgPSAwOyBpPGN5Y2xlczsgaSsrKXtcclxuICAgICAgICBcclxuICAgICAgICBpZihjb3VudGVyIDwgMCl7YnJlYWt9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBzbGlkZV9yZXZpZXdfY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHNsaWRlX3Jldmlld19jYXJkLmNsYXNzTGlzdC5hZGQoJ3Jldmlldy1jYXJkJyk7XHJcblxyXG4gICAgICAgIGxldCBzbGlkZV9yZXZpZXdfY2FyZF9uYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgc2xpZGVfcmV2aWV3X2NhcmRfbmFtZS5jbGFzc0xpc3QuYWRkKCdyZXZpZXctY2FyZC1uYW1lJyk7XHJcbiAgICAgICAgc2xpZGVfcmV2aWV3X2NhcmRfbmFtZS5pbm5lckhUTUwgPSAnLSAnICsgY29tbWVudF9wYWNrYWdlWyduYW1lJ11bY291bnRlcl07XHJcblxyXG4gICAgICAgIGxldCBzbGlkZV9yZXZpZXdfY2FyZF9yZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzbGlkZV9yZXZpZXdfY2FyZF9yZXZpZXcuY2xhc3NMaXN0LmFkZCgncmV2aWV3LWNhcmQtcmV2aWV3Jyk7XHJcbiAgICAgICAgc2xpZGVfcmV2aWV3X2NhcmRfcmV2aWV3LmlubmVySFRNTCA9IFwi4oCcXCIgKyBjb21tZW50X3BhY2thZ2VbJ2NvbW1lbnQnXVtjb3VudGVyXSArIFwi4oCdXCIgO1xyXG5cclxuICAgICAgICBsZXQgc2xpZGVfcmV2aWV3X2NhcmRfZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHNsaWRlX3Jldmlld19jYXJkX2RhdGUuY2xhc3NMaXN0LmFkZCgncmV2aWV3LWNhcmQtZGF0ZScpO1xyXG4gICAgICAgIHNsaWRlX3Jldmlld19jYXJkX2RhdGUuaW5uZXJIVE1MID0gY29tbWVudF9wYWNrYWdlWydkYXRlJ11bY291bnRlcl07XHJcblxyXG4gICAgICAgIHNsaWRlX3Jldmlld19jYXJkLmFwcGVuZChzbGlkZV9yZXZpZXdfY2FyZF9uYW1lLHNsaWRlX3Jldmlld19jYXJkX3JldmlldyxzbGlkZV9yZXZpZXdfY2FyZF9kYXRlKTtcclxuICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChzbGlkZV9yZXZpZXdfY2FyZCk7XHJcbiAgICAgICAgZG9jdW1lbnRfZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2xpZGUpO1xyXG5cclxuICAgICAgICBjb3VudGVyLS07XHJcbiAgICAgIH1cclxuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChkb2N1bWVudF9mcmFnbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0RGF0YSgpe1xyXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIuLi8uLi9nZXRfY29tbWVudHMucGhwXCIpO1xyXG4gIGxldCBjb21tZW50X3BhY2thZ2UgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgcmV0dXJuIGNvbW1lbnRfcGFja2FnZVxyXG5cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gU2xpZGVyTWVkaWFCdWlsZGVyKHNsaWRlcl9tZWRpYV9xdWVyeSl7XHJcbiAgbGV0IGNvbW1lbnRfcGFja2FnZSA9IGF3YWl0IGdldERhdGEoKTtcclxuICBpZiAoc2xpZGVyX21lZGlhX3F1ZXJ5Lm1hdGNoZXMpIHtcclxuICAgIGxldCBzbGlkZV9jb3VudDtcclxuICAgIGlmIChjb21tZW50X3BhY2thZ2VbJ251bV9yb3dzJ10gPjEwICl7XHJcbiAgICAgIHNsaWRlX2NvdW50ID0gMTA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzbGlkZV9jb3VudCA9IGNvbW1lbnRfcGFja2FnZVsnbnVtX3Jvd3MnXTtcclxuICAgIH1cclxuICAgIGxldCBjeWNsZXMgPSAxO1xyXG4gICAgZ2V0X2NvbW1lbnRzKFxyXG4gICAgY29tbWVudF9wYWNrYWdlWydudW1fcm93cyddLFxyXG4gICAgY29tbWVudF9wYWNrYWdlLFxyXG4gICAgc2xpZGVfY291bnQsXHJcbiAgICBjeWNsZXMpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZihjb21tZW50X3BhY2thZ2VbJ251bV9yb3dzJ10gJSA0ID09IDEpe1xyXG4gICAgICBsZXQgc2xpZGVfY291bnQ7XHJcbiAgICAgIGlmIChjb21tZW50X3BhY2thZ2VbJ251bV9yb3dzJ10gPjIwICl7XHJcbiAgICAgICAgc2xpZGVfY291bnQgPSA1O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNsaWRlX2NvdW50ID0gTWF0aC5yb3VuZChjb21tZW50X3BhY2thZ2VbJ251bV9yb3dzJ10gLyA0KSsxOy8vTWF0aC5yb3VuZChjb21tZW50X3BhY2thZ2VbJ251bV9yb3dzJ10gLyA0KSsxO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBjeWNsZXMgPSA0O1xyXG4gICAgICBnZXRfY29tbWVudHMoXHJcbiAgICAgIGNvbW1lbnRfcGFja2FnZVsnbnVtX3Jvd3MnXSxcclxuICAgICAgY29tbWVudF9wYWNrYWdlLFxyXG4gICAgICBzbGlkZV9jb3VudCxcclxuICAgICAgY3ljbGVzKTtcclxuICAgIH0gZWxzZXtcclxuICAgICAgbGV0IHNsaWRlX2NvdW50O1xyXG4gICAgICBpZiAoY29tbWVudF9wYWNrYWdlWydudW1fcm93cyddID4yMCApe1xyXG4gICAgICAgIHNsaWRlX2NvdW50ID0gNTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzbGlkZV9jb3VudCA9IE1hdGgucm91bmQoY29tbWVudF9wYWNrYWdlWydudW1fcm93cyddIC8gNCk7Ly9NYXRoLnJvdW5kKGNvbW1lbnRfcGFja2FnZVsnbnVtX3Jvd3MnXSAvIDQpO1xyXG4gICAgICB9O1xyXG4gICAgICBsZXQgY3ljbGVzID0gNDtcclxuICAgICAgZ2V0X2NvbW1lbnRzKFxyXG4gICAgICBjb21tZW50X3BhY2thZ2VbJ251bV9yb3dzJ10sXHJcbiAgICAgIGNvbW1lbnRfcGFja2FnZSxcclxuICAgICAgc2xpZGVfY291bnQsXHJcbiAgICAgIGN5Y2xlcyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFN3aXBlckluaXRpYWxpemF0aW9uKClcclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbm1vZGFsKCkge1xyXG4gIG1vZGFsLnNob3dNb2RhbCgpO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlbW9kYWwoKSB7XHJcbiAgbW9kYWwuY2xvc2UoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQ2hlY2tSZXZpZXdWYWxpZGF0aW9uKGZvcm0pe1xyXG4gIGxldCBjb21tZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLnZhbHVlO1xyXG4gIGxldCBuYW1lID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLnZhbHVlO1xyXG4gIGxldCB3YXJuaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlldy1pbnZhbGlkLXdhcm5pbmcnKVxyXG4gIGlmKGNvbW1lbnQgJiYgbmFtZSl7XHJcbiAgICBpZihjb21tZW50Lmxlbmd0aCA8IDEwMCl7XHJcbiAgICAgIGZvcm0uc3VibWl0KClcclxuICAgICAgXHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIHdhcm5pbmcuaW5uZXJIVE1MID0gXCLQktGLINCy0LLQtdC70LggXCIgKyBjb21tZW50Lmxlbmd0aCArIFwiINGB0LjQvNCy0L7Qu9C+0LJcIjtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgd2FybmluZy5pbm5lckhUTUwgPSBcItCX0LDQv9C+0LvQvdC40YLQtSDQstGB0LUg0L/QvtC70Y8hXCI7XHJcbiAgfVxyXG4gIFxyXG59XHJcblxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3LWZvcm0nKS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLGZ1bmN0aW9uKGV2ZW50KXtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIENoZWNrUmV2aWV3VmFsaWRhdGlvbih0aGlzKTtcclxufSk7XHJcblxyXG5jb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXZpZXctc2xpZGVyLXdyYXBwZXJcIik7XHJcbmNvbnN0IHNsaWRlcl9tZWRpYV9xdWVyeSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOjgwMHB4KScpO1xyXG5zbGlkZXJfbWVkaWFfcXVlcnkuYWRkTGlzdGVuZXIoU2xpZGVyTWVkaWFCdWlsZGVyKTtcclxuU2xpZGVyTWVkaWFCdWlsZGVyKHNsaWRlcl9tZWRpYV9xdWVyeSk7XHJcblxyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3QtYnV0dG9uJykuZm9yRWFjaChmdW5jdGlvbihidG4pe1xyXG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICBwcm9kdWN0SUQgPSBidG4uZGF0YXNldC5pZFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9yZGVyLXByb2R1Y3QtaWQnKS52YWx1ZSA9IHByb2R1Y3RJRFxyXG4gICAgXHJcbiAgfSlcclxufSlcclxuXHJcbiJdfQ==
